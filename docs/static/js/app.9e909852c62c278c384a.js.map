{"version":3,"sources":["webpack:///./src/components/Price.vue?36e1","webpack:///./src/components/Metadata.vue?dad1","webpack:///src/App.vue","webpack:///./src/components/Price.vue","webpack:///src/components/Price.vue","webpack:///./src/components/Metadata.vue","webpack:///src/components/Metadata.vue","webpack:///./src/App.vue?dd38","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["components_Price","render","_h","this","$createElement","_c","_self","staticClass","_m","_v","ref","attrs","id","_s","$parent","getCleanValue","lastPrice","staticRenderFns","components_Metadata","_vm","metaInfo","App","name","components","Price","__webpack_require__","normalizeComponent","props","watch","newVal","oldVal","$refs","value","style","animation","Metadata","Metadata_normalizeComponent","data","vol","daily","recordedPrices","methods","[object Object]","subscribeMsg","type","product_ids","channels","socket","WebSocket","onopen","send","JSON","stringify","onmessage","msg","parsedJSON","parse","parseFloat","push","time","Date","length","shift","renderGraph","extentX","d3","extent","d","xScale","domain","min","max","yScale","axis","call","axisLeft","scale","ticks","path","attr","line","toFixed","replace","connect","scaleTime","range","scaleLinear","vm","x","y","curve","curveMonotoneX","graph","select","append","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","ssrContext","vue_esm","config","productionTip","el","template"],"mappings":"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","file":"static/js/app.9e909852c62c278c384a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"topbox floatl ml50\"},[_vm._m(0),_vm._v(\" \"),_c('div',{ref:\"value\",attrs:{\"id\":\"price\"}},[_vm._v(\"\\n        \"+_vm._s(this.$parent.getCleanValue(_vm.lastPrice))+\"\\n    \")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"cryptoname\"}},[_vm._v(\"\\n        Bitcoin\"),_c('span',{staticClass:\"ticker\"},[_vm._v(\"BTC\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6beb00c2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Price.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"topbox floatr\"},[_c('div',{staticClass:\"details\"},[_vm._v(\"volume: \"),_c('span',[_vm._v(_vm._s(this.$parent.getCleanValue(_vm.metaInfo['vol'])))])]),_vm._v(\" \"),_c('div',{staticClass:\"details\"},[_vm._v(\"daily high: \"),_c('span',[_vm._v(_vm._s(this.$parent.getCleanValue(_vm.metaInfo['daily'])))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3a5169b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Metadata.vue\n// module id = null\n// module chunks = ","<template>\n    <div id=\"container\">\n        <div class=\"upper-area\">\n            <Price v-bind:lastPrice=\"lastPrice\"/>\n            <Metadata v-bind:metaInfo=\"metaInfo\"/>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport Price from \"./components/Price\";\nimport Metadata from \"./components/Metadata\";\n\n\nexport default {\n    name: \"App\",\n    components: {\n        Price,\n        Metadata,\n    },\n    data(){\n        return{\n            lastPrice: 0.0,\n            metaInfo: {\n                vol: 0.0, \n                daily: 0.0\n            },\n            recordedPrices: []\n        }\n    },\n    methods: {\n        connect () {\n            const subscribeMsg = {\n                \"type\": \"subscribe\",\n                \"product_ids\": [\n                    \"BTC-USD\"\n                ],\n                \"channels\": [\n                    {\n                        \"name\": \"ticker\",\n                        \"product_ids\": [\n                            \"BTC-USD\"\n                        ]\n                    }\n                ]\n            };\n            const MAX_PRICE_MEMORY = 50;\n            const feedURL = 'wss://ws-feed.pro.coinbase.com';\n            \n            this.socket = new WebSocket(feedURL);\n\n            this.socket.onopen = () => {\n                this.socket.send(JSON.stringify(subscribeMsg));\n            }\n\n            this.socket.onmessage = (msg) => {\n                let parsedJSON = JSON.parse(msg.data);\n\n                if(parsedJSON[\"type\"] === \"ticker\"){\n                    this.lastPrice = parseFloat(parsedJSON[\"price\"]);\n                    this.recordedPrices.push({time: new Date(), value: parsedJSON[\"price\"]});\n                    this.metaInfo['vol'] = parsedJSON['volume_24h'];\n                    this.metaInfo['daily'] = parsedJSON['high_24h'];\n\n                    //Keep the array size under MAX_PRICE_MEMORY\n                    if(this.recordedPrices.length > MAX_PRICE_MEMORY)\n                        this.recordedPrices.shift();\n\n                    // console.log(this.lastPrice);\n                    // console.log(this.recordedPrices);\n                    this.renderGraph(this.recordedPrices);\n                }\n            }\n        },\n        renderGraph (data){\n            //Recalculate new min/max for each of x,y and update scale\n            let extentX = d3.extent(data, d => d.time);\n            this.xScale.domain(extentX);\n            //Pad Y Values by 1%\n            let min = parseFloat(d3.min(data, d => d.value));\n            let max = parseFloat(d3.max(data, d => d.value));\n            this.yScale.domain([min - min*.0001, max + max*.0001]);\n\n            //Update Y Axis\n            this.axis.call(d3.axisLeft().scale(this.yScale).ticks(3));\n            \n            //Update path\n            this.path.attr('d', this.line(data)).attr('class', 'smoothline');\n\n            \n        },\n        //Return with 2 decimal places and commas where necessary (regex)\n        getCleanValue(data) {\n            return parseFloat(data)\n                    .toFixed(2)\n                    .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n    },\n\n    mounted () {\n        this.connect(); //Start streaming data from websocket\n\n        //---GRAPH CODE---//\n\n        //D3 Related letiables\n        let width = 800;\n        let height = 600;\n\n        //Mapping functions for each of x,y\n        this.xScale = d3.scaleTime()\n            .range([0,width]);\n        this.yScale = d3.scaleLinear()\n            .range([height,0]);\n            \n        //Line function, maps time,value to x,y cords\n        let vm = this;\n        this.line = d3.line()\n            .x(function(d){ return vm.xScale(d.time); })\n            .y(function(d){ return vm.yScale(d.value); })\n            .curve(d3.curveMonotoneX);\n\n        //Append graph to DOM\n        let graph = d3.select(\"#container\").append(\"svg\")\n            .attr(\"height\", height)\n            .attr(\"width\", width)\n            .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n            .attr(\"viewBox\", \"0 0 800 600\")\n            .attr(\"id\", \"graph\")\n            .append(\"g\");\n        this.path = graph.append('path').attr(\"stroke-linecap\",\"round\");\n\n            \n        //Y Axis\n        this.axis = graph.append(\"g\").attr('class', 'axis');\n        \n    }\n\n};\n\n\n</script>\n\n<style lang=\"scss\">\n    @import './assets/styles.css';\n</style>\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Price.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Price.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6beb00c2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Price.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Price.vue\n// module id = null\n// module chunks = ","<template>\n\n    <div class=\"topbox floatl ml50\">\n        <div id=\"cryptoname\">\n            Bitcoin<span class=\"ticker\">BTC</span>\n        </div>\n        <div id=\"price\" ref=\"value\">\n            {{this.$parent.getCleanValue(lastPrice)}}\n        </div>\n    </div>\n\n</template>\n\n\n<script>\nexport default {\n    props: ['lastPrice'],\n    name: \"Price\",\n    watch: { \n        lastPrice: function(newVal, oldVal) { \n                if(newVal > oldVal)\n                    this.$refs.value.style.animation = \"greenFlash .8s\";\n                if(newVal < oldVal)\n                    this.$refs.value.style.animation = \"redFlash .8s\";\n            }\n    }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Price.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Metadata.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Metadata.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3a5169b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Metadata.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Metadata.vue\n// module id = null\n// module chunks = ","<template>\n\n    <div class=\"topbox floatr\">\n        <div class=\"details\">volume: <span>{{this.$parent.getCleanValue(metaInfo['vol'])}}</span></div>\n        <div class=\"details\">daily high: <span>{{this.$parent.getCleanValue(metaInfo['daily'])}}</span></div>\n    </div>\n\n</template>\n\n\n<script>\nexport default {\n    name: \"Metadata\",\n    props: ['metaInfo']\n\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Metadata.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"upper-area\"},[_c('Price',{attrs:{\"lastPrice\":_vm.lastPrice}}),_vm._v(\" \"),_c('Metadata',{attrs:{\"metaInfo\":_vm.metaInfo}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4933d105\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4933d105\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4933d105\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}