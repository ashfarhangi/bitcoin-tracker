webpackJsonp([1],{BK3v:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"topbox floatl ml50"},[this._m(0),this._v(" "),t("div",{ref:"value",attrs:{id:"price"}},[this._v("\n        "+this._s(this.$parent.getCleanValue(this.lastPrice))+"\n    ")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"cryptoname"}},[this._v("\n        Bitcoin"),t("span",{staticClass:"ticker"},[this._v("BTC")])])}]},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topbox floatr"},[a("div",{staticClass:"details"},[e._v("volume: "),a("span",[e._v(e._s(this.$parent.getCleanValue(e.metaInfo.vol)))])]),e._v(" "),a("div",{staticClass:"details"},[e._v("daily high: "),a("span",[e._v(e._s(this.$parent.getCleanValue(e.metaInfo.daily)))])])])},staticRenderFns:[]},r={name:"App",components:{Price:a("VU/8")({props:["lastPrice"],name:"Price",watch:{lastPrice:function(e,t){e>t&&(this.$refs.value.style.animation="greenFlash .8s"),e<t&&(this.$refs.value.style.animation="redFlash .8s")}}},i,!1,null,null,null).exports,Metadata:a("VU/8")({name:"Metadata",props:["metaInfo"]},n,!1,null,null,null).exports},data:()=>({lastPrice:0,metaInfo:{vol:0,daily:0},recordedPrices:[]}),methods:{connect(){const e={type:"subscribe",product_ids:["BTC-USD"],channels:[{name:"ticker",product_ids:["BTC-USD"]}]};this.socket=new WebSocket("wss://ws-feed.pro.coinbase.com"),this.socket.onopen=(()=>{this.socket.send(JSON.stringify(e))}),this.socket.onmessage=(e=>{let t=JSON.parse(e.data);"ticker"===t.type&&(this.lastPrice=parseFloat(t.price),this.recordedPrices.push({time:new Date,value:t.price}),this.metaInfo.vol=t.volume_24h,this.metaInfo.daily=t.high_24h,this.recordedPrices.length>50&&this.recordedPrices.shift(),this.renderGraph(this.recordedPrices))})},renderGraph(e){let t=d3.extent(e,e=>e.time);this.xScale.domain(t);let a=parseFloat(d3.min(e,e=>e.value)),s=parseFloat(d3.max(e,e=>e.value));this.yScale.domain([a-1e-4*a,s+1e-4*s]),this.axis.call(d3.axisLeft().scale(this.yScale).ticks(3)),this.path.attr("d",this.line(e)).attr("class","smoothline")},getCleanValue:e=>parseFloat(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},mounted(){this.connect();this.xScale=d3.scaleTime().range([0,800]),this.yScale=d3.scaleLinear().range([600,0]);let e=this;this.line=d3.line().x(function(t){return e.xScale(t.time)}).y(function(t){return e.yScale(t.value)}).curve(d3.curveMonotoneX);let t=d3.select("#container").append("svg").attr("height",600).attr("width",800).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 800 600").attr("id","graph").append("g");this.path=t.append("path").attr("stroke-linecap","round"),this.axis=t.append("g").attr("class","axis")}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"container"}},[t("div",{staticClass:"upper-area"},[t("Price",{attrs:{lastPrice:this.lastPrice}}),this._v(" "),t("Metadata",{attrs:{metaInfo:this.metaInfo}})],1)])},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(e){a("BK3v")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:c},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.9e909852c62c278c384a.js.map