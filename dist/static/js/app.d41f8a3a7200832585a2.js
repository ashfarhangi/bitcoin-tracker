webpackJsonp([0],{Cn6S:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"topbox floatl ml50"},[this._m(0),this._v(" "),e("div",{attrs:{id:"price"}},[this._v(this._s(this.$parent.getCleanValue(this.lastPrice)))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"cryptoname"}},[this._v("\n        Bitcoin"),e("span",{staticClass:"ticker"},[this._v("BTC")])])}]};var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topbox floatr"},[a("div",{staticClass:"details"},[t._v("volume: "),a("span",[t._v(t._s(this.$parent.getCleanValue(t.metaInfo.vol)))])]),t._v(" "),a("div",{staticClass:"details"},[t._v("daily high: "),a("span",[t._v(t._s(this.$parent.getCleanValue(t.metaInfo.daily)))])])])},staticRenderFns:[]};var r={name:"App",components:{Price:a("VU/8")({props:["lastPrice"],name:"Price"},i,!1,function(t){a("iugX")},null,null).exports,Metadata:a("VU/8")({name:"Metadata",props:["metaInfo"]},n,!1,function(t){a("Cn6S")},null,null).exports},data:()=>({lastPrice:0,metaInfo:{vol:0,daily:0},recordedPrices:[]}),methods:{connect(){const t={type:"subscribe",product_ids:["BTC-USD"],channels:[{name:"ticker",product_ids:["BTC-USD"]}]};this.socket=new WebSocket("wss://ws-feed.pro.coinbase.com"),this.socket.onopen=(()=>{this.socket.send(JSON.stringify(t))}),this.socket.onmessage=(t=>{let e=JSON.parse(t.data);"ticker"===e.type&&(this.lastPrice=parseFloat(e.price),this.recordedPrices.push({time:new Date,value:e.price}),this.metaInfo.vol=e.volume_24h,this.metaInfo.daily=e.high_24h,this.recordedPrices.length>50&&this.recordedPrices.shift(),this.renderGraph(this.recordedPrices))})},renderGraph(t){let e=d3.extent(t,t=>t.time);this.xScale.domain(e);let a=parseFloat(d3.min(t,t=>t.value)),s=parseFloat(d3.max(t,t=>t.value));this.yScale.domain([a-1e-4*a,s+1e-4*s]),this.axis.call(d3.axisLeft().scale(this.yScale).ticks(3)),this.path.attr("d",this.line(t)).attr("class","smoothline")},getCleanValue:t=>parseFloat(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},mounted(){this.connect();this.xScale=d3.scaleTime().range([0,800]),this.yScale=d3.scaleLinear().range([600,0]);var t=this;this.line=d3.line().x(function(e){return t.xScale(e.time)}).y(function(e){return t.yScale(e.value)}).curve(d3.curveMonotoneX);let e=d3.select("#container").append("svg").attr("height",600).attr("width",800).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 800 600").attr("id","graph").append("g");this.path=e.append("path").attr("stroke-linecap","round"),this.axis=e.append("g").attr("class","axis")}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"container"}},[e("div",{staticClass:"upper-area"},[e("Price",{attrs:{lastPrice:this.lastPrice}}),this._v(" "),e("Metadata",{attrs:{metaInfo:this.metaInfo}})],1)])},staticRenderFns:[]};var l=a("VU/8")(r,c,!1,function(t){a("PdMW")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:l},template:"<App/>"})},PdMW:function(t,e){},iugX:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d41f8a3a7200832585a2.js.map